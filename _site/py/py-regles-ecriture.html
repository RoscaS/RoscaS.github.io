<!DOCTYPE html>
<html>

    <head>
        <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://roscas.github.io/py/py-regles-ecriture.html">
  <link rel="alternate" type="application/rss+xml" title="RoscaS" href="https://roscas.github.io/feed.xml">

<!-- JS -->
  <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> -->
  <script src="/js/mermaid.min.js"></script>

</head>


        
          <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
  ga('create', 'UA-99742998-1', 'auto');
  ga('send', 'pageview');
    
	</script>


        

        
    </head>

    <body>
        <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Py: Regles d&#39;écriture </title>
  <meta name="description" content="Sources">
</head>


        <div class="wrapper">
            <header class="post-header">
	
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>


    <center>
		<div class="post-title" itemprop="name headline">Py: Regles d'écriture </div>

		<div class="post-meta"><i class="fa fa-calendar-o"></i> <time datetime="29 Sep 2017" itemprop="datePublished">Sep 29 2017</time>

			&nbsp;&nbsp;•&nbsp;&nbsp;<i class="fa fa-user-secret"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sol</span>
        	
			<br>
			<i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-pulse"></i></span>clicks</span>
		</div>

        	
        <div class="post-tags">
        	
			<a class="post-tags-item" href="https://roscas.github.io/tags/">tools</a>
        	
			
		</div>
    </center>

<div class="wrapper">

    <center>      
		<p>
			<a class="link" href="/">Home</a> /
			<a class="link" href="/math/">Math & Physique</a> /
			<a class="link" href="/archive/">Archive</a> /
			<a class="link" href="/category/">Category</a> / 
			<a class="link" href="/tags/">Tags</a> / 
			<a class="link" href="/about/">About</a> /
			<a class="link" href="/contact/">Contact</a>
    	</p>
    </center>
</div>
    
</header>

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<div class="post-content">
    <center>
	
	<p>Pour un code Pythonique</p>
	
    </center>
	<h2>Directory</h2>
</div>

<div id="category"></div>

<div class="post-content" itemprop="articleBody">
    <h2 id="sources">Sources</h2>

<ul>
  <li><a href="https://zestedesavoir.com/articles/1079/les-secrets-dun-code-pythonique/">zestdesavoir</a></li>
</ul>

<h1 id="grands-acronymes">Grands acronymes</h1>

<h2 id="kiss-keep-it-simple-stupid">KISS (Keep it simple, stupid)</h2>
<p>Le code doit toujours rester le plus simple possible, afin de rester lisible pour les autres contributeurs.</p>

<p>Cela s’illustre par la syntaxe même du langage, qui comprendpeu de constructions différentes, mais doit aussi se retrouver dans le code produit. Les fonctions, par exemple, doivent êetre dédiées à une unique fonctionnalité, de même pour les classes et leurs méthodes.</p>

<p>En parlant de classes, <strong>il est inutile de créer de nouvelles classes trop vite</strong>, là ou les types primitifs du langge pourraient répondre au besoin. Par exemple, pour un objet qui ne contiendrait que des données, associées à aucune méthode, un dictionnaire fait très bien l’affaire.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'username'</span><span class="p">:</span> <span class="s">'Poule'</span><span class="p">,</span>
    <span class="s">'realname'</span><span class="p">:</span> <span class="s">'Claudie'</span><span class="p">,</span>
    <span class="s">'password'</span><span class="p">:</span> <span class="s">'12345'</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Le principe s’exprime aussi par le fait de ne pas créer de hiéarchie de classes trop complexe, et même d’ailleurs de <strong>ne pas utiliser d’héritge quand ce n’est pas nécessaire</strong> (penser au <em>Duck typing</em>). De même, Python dispose d’outils puissants (décorateurs, générateurs, métaclasses), qui doivent être utilisés judicieusement, quand ils ne nuisent pas à la simplicité.</p>

<h2 id="dry-dont-repeat-yourself">DRY (Don’t Repeat Yourself)</h2>
<p>Cette règle a pour but d’éviter la redondance. Le code dupliqué est plus difficile à maintenir, car chaque modification doit être répercutée sur toutes les occurences du code.</p>

<p><strong>La répétition peut se comprendre</strong> à petite échelle: par exemple <strong>une même ligne répéte à deux endroits du code</strong>. Au-delà, une factorisation est necessaire, afin de dédier une fonction à ce comportement.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">errlog</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">),</span> <span class="nb">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

<span class="n">secret</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">'Nbr btwin 0 and 100: '</span><span class="p">))</span>

<span class="k">if</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">secret</span><span class="p">:</span>
    <span class="n">errlog</span><span class="p">(</span><span class="s">'Nombre {} trop petit'</span><span class="p">,</span> <span class="n">guess</span><span class="p">)</span>

<span class="k">if</span> <span class="n">guess</span> <span class="o">&gt;</span> <span class="n">secret</span><span class="p">:</span>
    <span class="n">errlog</span><span class="p">(</span><span class="s">'Nombre {} trop grand'</span><span class="p">,</span> <span class="n">guess</span><span class="p">)</span>
<span class="o">...</span>
</code></pre>
</div>

<blockquote>
  <p>La fonction <code class="highlighter-rouge">errlog</code> permet ici de factoriser le formatage et l’affichage de messages d’erreur.</p>
</blockquote>

<h2 id="yagni-tou-aint-gonna-need-it-mate">YAGNI (Tou Ain’t Gonna Need It <em>mate</em>)</h2>
<p>Ce principe est plus une ligne de conduite pour le processus de développement. Il est inutile de développer maintenant une fonctionnalité qui ne servira peut-être jamais. Il est préférable de s’attaquer d’abord à ce qui est actuellement nécessaire.</p>

<p>Développer une fonctionnalité trop tot présente de plus d’autres problèmes:</p>

<ul>
  <li>Inutilisée, elle restera inconnue des autres développeurs</li>
  <li>Si elle vient à êetreutilisée, elle ne le sera peut-être pas dans les termes actuellement définis</li>
  <li>La fonctionnalité devra être continuellement testée tout le long du developpement du projet, et potentiellement déboguée</li>
  <li>Enfin, elle pourrait entrer en conflit avec d’autres fonctionnalités requises.</li>
</ul>

<h2 id="were-all-consenting-adults-here">We’re all consenting adults here</h2>
<p>Ou plus clairemen, les développeurs sont conscients et responsables de leurs actes. Cela s’illustre par <strong>la manière de protéger des attributs</strong> en Python, en les préfixant par un <code class="highlighter-rouge">_</code>.</p>

<p>En soi, rien n’empêche d’accéder depuis l’extérieur à tel attribut mais le préfixe signale au développeur qu’il accède à un état interne, que sa modification pourrait compromettre le comportement normal de l’objet, et qu’il le fait donc en connaissance de cause.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internal</span> <span class="o">=</span> <span class="s">'internal state'</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">MyObject</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_internal</span><span class="p">)</span>
</code></pre>
</div>

<p>En parlant d’attributs, <strong>on préférera toujorus en Python un accès direct aux attributs plutot que des méthodes</strong> <em>getter/setter</em>. Quitte à passer par des propriétés s’il est nécessaire que la récupération ou la modification de l’attribut soit dynamique.</p>

<h2 id="easier-to-ask-forgiveness-than-permission-eafp">Easier to ask forgiveness than permission (EAFP)</h2>
<p>Python fait partie des langages qui considèrent qu’il est plus simple d’essayer puis de gérer les erreurs que de demander la permission en amont.</p>

<p>Pour gérer l’ouverture d’un fichier, par exemple, on préférera faire appel à <code class="highlighter-rouge">open</code>, et traiter les différentes exceptions qui pourraient se produire (fichier inexistant, droits insuffisants, etc…), plutot que de tester une à une ces différentes conditions.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'filemame'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">handle_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">except</span> <span class="n">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">errlog</span><span class="p">(</span><span class="s">'Fichier {!r} non trouvé'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<span class="k">except</span> <span class="n">PermissionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">errlog</span><span class="p">(</span><span class="s">'Fichier {!r} non lisible'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</code></pre>
</div>

<p>Cette manière de procéder a aussi l’avantage d’être plus sure en Python. En effet, dans le cas où l’on testerait d’abord l’existence du fichier, rien nenous grentit qu’il serait toujours présent au moment de l’ouverture proprement dite (il peut être supprimé par un utre progrmme entre temps).</p>

<blockquote>
  <p>Ce principe s’oppose au LBYL (Look before you leap) préconisé par d’autres langages comme le C.</p>
</blockquote>

<h1 id="mécanismes-du-langage">Mécanismes du langage</h1>

<p>On reconnait généralement un bon code Python à l’utilisation des mécanismes qui lui sont propres.</p>

<h2 id="unpacking">Unpacking</h2>
<p>L’unpacking (ou déconstruction) est une technique qui permet l’assignation de plusieurs variables en une seule instruction. Par exemple pour échanger les valeurs de deux variables:</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="mi">2</span> <span class="mi">5</span>
</code></pre>
</div>

<p>En interne, lors de la 3e ligne, Python crée un tuple <code class="highlighter-rouge">(b, a)</code>, qui est ensuite déconstruit et son contenu est stocké dans les variables <code class="highlighter-rouge">a</code> et <code class="highlighter-rouge">b</code></p>

<p>L’unpacking ne se limite pas à ça, il permet aussi de déconstruire des structures imbriquées (tuples, listes, strings, dictionnaires).</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s">'bar}), 5]</span><span class="err">
</span><span class="s">&gt;&gt;&gt; a, (b, c, (d, e)), f = l</span><span class="err">
</span><span class="s">&gt;&gt;&gt; print(a, b, c, d , e, f)</span><span class="err">
</span><span class="s">0 1 2 3 4 5</span><span class="err">
</span><span class="s">&gt;&gt;&gt; x, y, z = '</span><span class="n">bar</span><span class="s">'</span><span class="err">
</span><span class="s">&gt;&gt;&gt; print(x, y, z)</span><span class="err">
</span><span class="s">b a r </span><span class="err">
</span></code></pre>
</div>

<p>L’unpacking est une manière élégante de séparer les éléments d’une liste, il est donc courant de l’employer en Python.</p>

<blockquote>
  <p>constructions plus complexes avec l’opérateur <em>splat</em> (<code class="highlighter-rouge">*</code>), voir article associé</p>
</blockquote>

<h2 id="conditions">Conditions</h2>
<p>Toute valeur en Python peut s’évaluer sous forme d’un booléen, il n’est donc pas nécéssaire de la convertir préalablement. Les valeurs <code class="highlighter-rouge">None</code>, <code class="highlighter-rouge">0</code> et les conteneurs vides (<code class="highlighter-rouge">''</code>, <code class="highlighter-rouge">()</code>, <code class="highlighter-rouge">[]</code>, <code class="highlighter-rouge">set()</code>, etc…) s’évaluent à <code class="highlighter-rouge">False</code>. Les autres nombres, les conteneurs non vides, et plus généralement toute valeur qui n’est pas explicitement fausse s’évaluent à <code class="highlighter-rouge">True</code>.</p>

<p><strong>L’usage de ternaires</strong> est a privilégier quand on souhaite évaluer des expressions conditionnelles courtes:</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="s">'anonymous'</span>
</code></pre>
</div>

<blockquote>
  <p>On notera l’utilisation de l’opérateur <code class="highlighter-rouge">is</code> pour la comparaison avec <code class="highlighter-rouge">None</code>. Ce dernier étant une constante unique, <code class="highlighter-rouge">is</code> permet d’en assurer la singularité.</p>
</blockquote>

<h2 id="boucle-for">Boucle for</h2>
<p>En Python, la boucle <code class="highlighter-rouge">for</code> doit toujours être privilégiée pour itérer sur un ensemble d’éléments. Si on utilise une <code class="highlighter-rouge">while</code> <strong>pour itérer</strong>, c’est probablement qu’il y a un problème de conception. Cet ensemble d’éléments ne prend pas toujours la forme d’une liste, il peut s’agire d’un dictionnaire, d’un fichier, d’un intervalle de nombres (<code class="highlighter-rouge">range</code>).</p>

<p>Ceci est valable pour toutes les variables qui devraient prendre des valeurs successives à chaque itération. Ainsi, on s’orientera vers <code class="highlighter-rouge">zip</code> pour itérer sur plusieurs éléments à la fois, vers <code class="highlighter-rouge">enumerate</code> pour itérer en gardant trace de l’index dans la liste, ou encore vers des constructions plus complexes du mondule <code class="highlighter-rouge">itertools</code>.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Alex'</span><span class="p">,</span> <span class="s">'Alice'</span><span class="p">,</span> <span class="s">'Bob'</span><span class="p">]</span>
<span class="n">ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">74</span><span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ages</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ages</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
</code></pre>
</div>

<p>On retrouve dans cette construction l’unpacking abordé plus haut, qui peut donc s’utiliser aussi pour les boucles <code class="highlighter-rouge">for</code>.</p>

<h2 id="listes-en-intension-comprehension">Listes en intension (comprehension)</h2>
<p>Outre la boucle <code class="highlighter-rouge">for</code>, le protocole d’itération est aussi représenté par les listes en intension, qui doivent être utilisées dès que possible, <strong>tant qu’elles ne nuisent pas à la lisibilité du code</strong>.</p>

<p>Pour construire la liste des carrés des nombres de 0 à 9, on utilisera le code suivant, plutot qu’une boucle multi-lignes et un remplissage de liste manuel:</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">squarres</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</code></pre>
</div>

<p>On retrouve la même construction pour les dictionnaires en intension:</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">squares_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>
<span class="n">squares_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>
</code></pre>
</div>

<h2 id="générateurs">Générateurs</h2>
<p>Un autre mécanisme est celui des générateurs (et des générateurs en intension), à utiliser quand il n’est pas nécéssaire d’avoir une représentation complète d’un ensemble en mémoire. Si notre liste <code class="highlighter-rouge">squares</code> a simplement pour but de calculer la somme des éléments (<code class="highlighter-rouge">sum(squares)</code>), nous lui préférerons la version utilisant un générateur, évitant ainsi le stockage inutile de la liste:</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="n">sum_squares</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</code></pre>
</div>

<h2 id="exceptions">EXceptions</h2>
<p>La gestion d’erreurs est réalisée en Python à l’aide d’un mécanisme d’exceptions, mais les exceptions ne se limitent pas à cela. Le protocole d’itération décrit plus haut s’appuie par exemple sur une exception <code class="highlighter-rouge">StopIteration</code> levée en fin de boucle.</p>

<p>Les traitements défectueux doivent toujours remonter une exception adaptée au problème, et décrivant au mieux sa raison. Les types d’exceptions sont généralement hiérarchisés de façon à représenter le problème à différents niveaux d’abstraction.</p>

<p>Si on est pas exemple amennés à développer une bibliothèque, il est courant que toutes ses exceptions héritent d’une même base permettant facilement d’attraper toutes les erreurs de la bibliothèque. Dnas le cas d’un champ manquant lors de l’analyse du fichier de configuration d’un composant de la bibliothèque, <code class="highlighter-rouge">mylib</code>, on pourrait avoir une exception du type <code class="highlighter-rouge">mylib.FieldMissingError</code> héritant de <code class="highlighter-rouge">mylib.ParseError</code> et elle même de <code class="highlighter-rouge">mylob.Error</code></p>

<p>De l’autre coté, il est conseillé d’ttraper judicieusement les exceptions. Si on souhaite attraper l’exception <code class="highlighter-rouge">mylib.FieldMissingError</code> plutot que <code class="highlighter-rouge">mylib.Error</code> qui serait dans ce cas trop général.</p>

<h2 id="décorateurs">Décorateurs</h2>
<p>Les décorateurs, utilisés à bon escient, sont aussi une particularité du langage. On reconnait un bon code idiomatique à l’utilisation des décorateurs de la bibliothèque standard (staticmethod, classmethod, property).</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_diameter</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">):</span>
        <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">=</span> <span class="p">(</span><span class="n">ax</span> <span class="o">+</span> <span class="n">by</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ay</span> <span class="o">+</span> <span class="n">by</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
        <span class="n">diam</span> <span class="o">=</span> <span class="p">((</span><span class="n">ax</span> <span class="o">-</span> <span class="n">bx</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">ay</span> <span class="o">-</span> <span class="n">by</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
</code></pre>
</div>

<p>**La définition de ses propres décorateurs ne doit en revanche avoir lieu que si elle permet un gain net en lisibilité par rapport aux autres solutions envisagées.</p>

<h2 id="gestionnaires-de-contextes">Gestionnaires de contextes</h2>

<p>L’ouverture de fichiers, doit toujours passer par l’utilisation d’un bloc <code class="highlighter-rouge">with</code>. Ce bloc permet en effet d’automatiser des opérations de libération des ressources, et ce en tous les cas (déroulement normal ou erreur).</p>

<h2 id="modules-collection">Modules collection</h2>
<p>Ce module comporte d’autres structures de données essentielles au langage: <code class="highlighter-rouge">OrderedDict</code>, <code class="highlighter-rouge">nametuple</code>, <code class="highlighter-rouge">counter</code>, ou encore <code class="highlighter-rouge">defaultdict</code> qui sera préférable à une utilisation systématique de <code class="highlighter-rouge">setdefault</code>. Une réflexe classique est de vouloir recréer ces classes, alors qu’elles sont à portée de main.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Alice'</span><span class="p">,</span> <span class="s">'Bob'</span><span class="p">,</span> <span class="s">'Bob'</span><span class="p">,</span> <span class="s">'Alice'</span><span class="p">,</span> <span class="s">'Alex'</span><span class="p">,</span> <span class="s">'Bob'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">count</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">count</span>
<span class="n">Counter</span><span class="p">({</span><span class="s">'Bob'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'Alice'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Alex'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">count</span><span class="p">[</span><span class="s">'Alice'</span><span class="p">]</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">count</span><span class="p">[</span><span class="s">'Camille'</span><span class="p">]</span>
<span class="mi">0</span>
</code></pre>
</div>

<h1 id="les-bons-réflexes">Les bons réflexes</h1>

<p>En premier lieu, il faut bien sur se relire en faisant attention aux divers principes et règles énoncés. Voire se faire relire par un tiers lorsque cela est possible.</p>

<p>Un autre réflexe sera de s’imprégner de la bibliothèque standard, et de s’assurer pour chaque fonctionnalité que l’on s’apprête à implémenter que celle-ci n’y existe pas déjà.</p>

<p>La fonction <code class="highlighter-rouge">help</code> permet aussi d’obtenir plus d’informations sur un module, un type, une fonction ou même un mécanisme du langage. Elle offre ainsi un accès rapide à la documentation directement depuis l’interpréteur interactif. Utilisée sns pramètres, <code class="highlighter-rouge">help</code> propose aussi une aide interactive.</p>

<div class="language-py highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="n">itertools</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="nb">max</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="s">'for'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">()</span>
</code></pre>
</div>

<p>Il conviendra aussi de connaitre les bibliothèques tierces, dans une moindre mesure afin de savoir trouver un bibliothèque répondant à un besoin précis. Il n’est pas nécessaire de toutes les connaitre sur le bout des doigts, ni de sortir une usine à gaz pour une petite fonctionnalité, mais simplement de <strong>ne pas réinventer la roue</strong>.</p>


</div>

<div>
	
	<div class="eof"></div>
	
</div>

<!--<div class="share">
    <p>Share this post with: </p>
	<a href="https://twitter.com/intent/tweet?text=Py: Regles d'écriture @&amp;url=https://roscas.github.io/py/py-regles-ecriture.html" class="twitter-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://www.facebook.com/sharer/sharer.php?u=https://roscas.github.io/py/py-regles-ecriture.html" class="facebook-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://plus.google.com/share?url=https://roscas.github.io/py/py-regles-ecriture.html" class="googleplus-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</span>
	</a>
</div>
-->

<div id="disqus_thread"></div>


 
</div>


</article>

        </div>

    </body>

<footer class="site-footer">
    <div class="wrapper">
        <center>
            <p>
                <a class="link" href="/%20/">Home</a> /
                <a class="link" href="/archive/">Archive</a> /
                <a class="link" href="/category/">Category</a> /
                <a class="link" href="/tags/">Tags</a> /
                <a class="link" href="/about/">About</a> /
                <a class="link" href="/contact/">Contact</a>
            </p>
            <span><script>document.write(new Date().getFullYear());</script></span>
            <span>&copy;</span>

            <a href="mailto:sol.rosca@gmail.com?subject=Hello&nbsp;RoscaS"> RoscaS</a>
            <br>
        </center>
    </div>
</footer>

<foot>
    <foot>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Derictory -->

  <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>

<!-- Hit analytics -->

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- Directory -->

<script src="/js/main.js"></script>

</foot>

</foot>

</html>
