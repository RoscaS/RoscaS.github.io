* Objet ---
layout: post
title: "Py: classes"
subtitle: "Python: Programmation orientée objet "
date: 2017-07-14
author: Sol
category: Py
tags:  
finished: false
---

## Introduction

**Un objet en Python est défini par sa structure (les attributs qu'il contient et les méthodes qu'il lui sont applicables) plutôt que par son type.**

Python est entièrement construit autour de cette idée appelée _**duck-typing**_: 

> "Si je vois un animal qui vole comme un canard, cancane comme un canard, et nage comme un canard, alors j'appelle cet oiseau un cannard" (James Whitcomb Riley)

La **programmation orientée objet** est le _**paradigme**_ qui nous permet de définir nos propres types d'objets, avec leurs propriétés et opérations.

## Objet et caractéristiques

Un objet est constitué de 3 caractéristiques:
1. Un **type** qui identifie le **rôle** de l'objet.
2. Des **attributs** qui sont les **propriétés** de l'objet.
3. Des **méthodes**, les **opérations** (actions) qui s'appliquent sur l'objet.



## Association 

```python
import crypt, datetime

class User:
    def __init__(self, id, name, password):
        self.id        = id
        self.name      = name
        self._salt     = crypt.mksalt()
        self._passowrd = self._crypt_pwd(password)
    
    def _crypt_pwd(self, password):
        return crypt.crypt(password, self._salt)

    def check_pwd(self, password):
        return self._passowrd == self._crypt_pwd(password)

    def post(self, message):
        return Post(self, message)

class Post:
    def __init__(self, author, message):
        self.author  = author
        self.message = message
        self.date    = datetime.datetime.now()
    
    def format(self):
        date = self.date.strftime('le %d/%m/%y à %H:%M:%S')
        return '<div><span>Par {} {}</span><p>{}</p></div>'\
            .format(self.author.name, date, self.message)

if __name__ == '__main__':
    user = User(1, 'john', '12345')
    p    = user.post('Salut à tous')
    print(p.format())

```

output:

```
<div><span>Par john le 14/07/17 à 04:40:11</span><p>Salut à tous</p></div>
```

